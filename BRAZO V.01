#include <Servo.h>
Servo base,MI,MD,garra;
int i;
int variable_para_letra;
float pos[4][50]={
  /*          1 - 2 - 3 - 4 - 5 - 6 -  7 - 8 - 9 - 10- 11 -12- 13- 14- 15- 16- 17- 18- 19- 20- 21- 22- 23- 24- 25- 26- 27- 28- 29 -30 -31 -32 -33 -34 -35- 36- 37- 38- 39-  40- 41- 42- 43-  44- 45- 46- 47- 48- 49-50-51-52-53-54-55-56-57-58-59-60-61-62-63-64-65-66-67-68-69-70-71-72-73-74-75-76-77-78-79-80-81-82-83-84-85-86-87-88-89-90-91-92-93-94-95-96-97-98-99*/
/* base */   {98, 98, 98, 98, 98, 98, 98, 98,  98, 98, 98, 98, 98, 98, 98, 98, 98, 98, 98, 96, 96, 96, 96, 96, 93, 88, 84, 80, 78, 74, 70, 68, 64, 60, 58, 54, 50, 48, 44,  40, 38, 34, 30,  28, 24, 20, 19, 18, 17},
 /* MI */    {94, 94, 94, 94, 94, 94, 94, 94,  94, 94, 94, 94, 94, 94, 94, 94, 94, 94, 94, 94, 94, 94, 94, 94, 94, 94, 94, 94, 94, 94, 94, 94, 94, 94, 94, 94, 94, 94, 94,  94, 94, 94, 94,  94, 94, 94, 94, 94, 94},
 /* MD */    {27, 28, 29, 30, 34, 35, 36, 37,  38, 39, 40, 41, 42, 43, 44, 46, 48, 50, 50, 50, 49, 48, 47, 46, 44, 43, 42, 41, 40, 39, 38, 37, 36, 37, 38, 39, 40, 41, 42,  43, 44, 45, 46,  47, 48, 49, 50, 50, 50},
/* Garra*/   {0,  0 , 0 , 0 , 0 , 0,   0,  0,   0,  0,  0,  0,  0,  0,   0,  0,  0,  0, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10,  10, 10, 10, 10,  10, 10, 10, 10, 10, 0},
};

void setup() {
  Serial.begin(9600);   
  base.attach(12);
  MI.attach(13);
  MD.attach(11);
  garra.attach(10);
 
  base.write(98);
  MI.write(94);
  MD.write(27);
  garra.write(0);
  delay(1000);

}

void loop() {
 if (Serial.available()>0){
  variable_para_letra=Serial.read();
     if(dato_Serial=='H'){
           
      for(int i=0; i<49;i++){
     
           base.write(mov[0][i]);
           MI.write(mov[1][i]);
           MD.write(mov[2][i]);
          garra.write(mov[3][i]); 
          delay(100);
        }
    }
   if(variable_para_letra=='T') {
      base.write(98);
      MI.write(94);
      MD.write(27);
      garra.write(0);
      i=0; 
      delay(50);
   }
   if(dato_Serial=='G') {
      garra.write(0);
      i=0; 
      delay(50);
   }
  }
}
//////// AUTOMATICO////////
#include <Servo.h>

Servo servoBase;
Servo servoGancho;
Servo servoIzquierda;
Servo servoDerecha;
int l=0;
int dato_Serial;
int gradoBase;
int gradoGancho;
int gradoIzquierda;
int gradoDerecha;
void setup() {
  servoBase.attach(12);
  servoGancho.attach(10);
  servoIzquierda.attach(13);
  servoDerecha.attach(11);
  gradoBase=65;
  gradoGancho = 0;
  gradoIzquierda = 75;
  gradoDerecha = 0;
   servoBase.write(gradoBase);
   servoGancho.write(gradoGancho);
   servoIzquierda.write(gradoIzquierda);
   servoDerecha.write(gradoDerecha);
   Serial.begin(9600);
}

void loop() {
   if (Serial.available()>0)
      {
        dato_Serial=Serial.read();
        if(dato_Serial=='T')  {
          //movimiento brazo hacia adelante y atras
          if(dato_Serial=='T'){
          do{
          gradoDerecha = gradoDerecha+1 ;
          servoDerecha.write(gradoDerecha);
          l++;
          delay(18);
          }while(l<80);
          if(dato_Serial=='T')  {
            l=0;
            do  {
            gradoDerecha = gradoDerecha-1;
            servoDerecha.write(gradoDerecha);
            l++;
            delay(18);
            }while(l<80);
          }
          }
          // movimiento de la base
          if(dato_Serial=='T')
            {
            if(dato_Serial=='T'){
            l=0;
            do  {
            gradoBase = gradoBase +1;
            servoBase.write(gradoBase);
            delay(20);
            l++;
            }while(l<70);
            }
           if(dato_Serial=='T')
            {
            l=0;
            do  {
            gradoBase = gradoBase -1;
            servoBase.write(gradoBase);
            delay(20);
            l++;
            }while(l<140);
            }
            if(dato_Serial=='T')
            {
            l=0;
            do  {
            gradoBase = gradoBase +1;
            servoBase.write(gradoBase);
            delay(20);
            l++;
            }while(l<70);
            }
            }
            // moviento adelante
            if(dato_Serial=='T')
            {
              l=0;
             do {
            gradoIzquierda = gradoIzquierda+2;
            servoIzquierda.write(gradoIzquierda);
            delay(18);
            gradoDerecha = gradoDerecha+3 ;
            servoDerecha.write(gradoDerecha);
            delay(38);
            l++;
             }while(l<30);
             delay(1000);
             //gancho cierra
             if(dato_Serial=='T')
            {
              l=0;
            do{
            gradoGancho = gradoGancho+1;
            servoGancho.write(gradoGancho);
            delay(5);
            l++;
            }while(l<10);
            }
            delay(500);
            //moviendo hacia atras
            if(dato_Serial=='T')
              {
              l=0;
             do {
            gradoIzquierda = gradoIzquierda-2;
            servoIzquierda.write(gradoIzquierda);
            delay(18);
            gradoDerecha = gradoDerecha-3 ;
            servoDerecha.write(gradoDerecha);
            delay(38);
            l++;
             }while(l<30);
             }
            }
            delay(1000);
            //arriba y abajo
            if(dato_Serial=='T')  {
              l=0;
              do  {
              gradoIzquierda = gradoIzquierda-1;
              servoIzquierda.write(gradoIzquierda);
              delay(5);
              l++;
              }while(l<80);
              delay(1000);
              if(dato_Serial=='T')  {
              l=0;
              do  {
              gradoIzquierda = gradoIzquierda+1;
              servoIzquierda.write(gradoIzquierda);
              delay(18);
              l++;
              }while(l<80);
            }
            }
            delay(500);
            //gancho abre
            if(dato_Serial=='T')
            {
              l=0;
            do{
            gradoGancho = gradoGancho-1;
            servoGancho.write(gradoGancho);
            delay(5);
            l++;
            }while(l<15);
            }
            }
            l=0;
        }
 }

